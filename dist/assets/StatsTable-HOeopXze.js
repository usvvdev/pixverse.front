import{_ as A,a as B,b as I}from"./ComponentCard.vue_vue_type_script_setup_true_lang-DkJ2zfHS.js";import{d as v,r as l,o as S,a,c as r,b as t,w as h,n as g,F as p,i as u,t as o,q as $,h as f,g as x}from"./index-Boshft_s.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"mb-4 flex flex-wrap gap-4 items-center"},T=["value"],U=["value"],E={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},D={class:"max-w-full overflow-x-auto custom-scrollbar"},V={class:"min-w-full"},C={class:"divide-y divide-gray-200 dark:divide-gray-700"},j={class:"px-5 py-4 sm:px-6 text-theme-sm"},z={class:"block font-medium text-gray-800 dark:text-white/90"},L={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},M={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},N={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},P=v({__name:"BasicTableFive",setup(b){const i=l([]),d=l(""),n=l(""),m=l([]),y=l([]),_=async()=>{const c=localStorage.getItem("accessToken");try{const s=new URLSearchParams;d.value&&s.append("user_id",d.value),n.value&&s.append("app_id",n.value);const e=await fetch(`/dashboard/api/v1/statistics?app_name=chatgpt&${s.toString()}`,{headers:{Authorization:`Bearer ${c}`}});if(!e.ok)throw new Error("Failed to fetch statistics");i.value=await e.json()}catch(s){console.error("Error fetching statistics:",s)}},k=async()=>{const c=localStorage.getItem("accessToken");try{const s=await fetch("/dashboard/api/v1/statistics/filters",{headers:{Authorization:`Bearer ${c}`}});if(!s.ok)throw new Error("Failed to fetch filters");const e=await s.json();m.value=e.user_ids??[],y.value=e.app_ids??[]}catch(s){console.error("Error fetching filter options:",s)}};return S(async()=>{await k(),await _()}),(c,s)=>(a(),r("div",null,[t("div",F,[h(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),class:"px-3 py-2 border rounded-md text-sm w-48 dark:bg-gray-900 dark:text-white"},[s[2]||(s[2]=t("option",{value:""},"All Users",-1)),(a(!0),r(p,null,u(m.value,e=>(a(),r("option",{key:e,value:e},o(e),9,T))),128))],512),[[g,d.value]]),h(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>n.value=e),class:"px-3 py-2 border rounded-md text-sm w-48 dark:bg-gray-900 dark:text-white"},[s[3]||(s[3]=t("option",{value:""},"All Apps",-1)),(a(!0),r(p,null,u(y.value,e=>(a(),r("option",{key:e,value:e},o(e),9,U))),128))],512),[[g,n.value]]),t("button",{onClick:_,class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700"}," Apply Filters ")]),t("div",E,[t("div",D,[t("table",V,[s[4]||(s[4]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-5 py-3 text-left w-2/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"User ID")]),t("th",{class:"px-5 py-3 text-left w-2/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"App ID")]),t("th",{class:"px-5 py-3 text-left w-1/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Usage")]),t("th",{class:"px-5 py-3 text-left w-1/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Balance")])])],-1)),t("tbody",C,[(a(!0),r(p,null,u(i.value,(e,w)=>(a(),r("tr",{key:w,class:"border-t border-gray-100 dark:border-gray-800"},[t("td",j,[t("span",z,o(e.user_id),1)]),t("td",L,o(e.app_id),1),t("td",M,o(e.app_id_usage),1),t("td",N,o(e.balance),1)]))),128))])])])])]))}}),q={class:"space-y-5 sm:space-y-6"},J=v({__name:"StatsTable",setup(b){const i=l("Статистика пользователей");return(d,n)=>(a(),$(I,null,{default:f(()=>[x(A,{pageTitle:i.value},null,8,["pageTitle"]),t("div",q,[x(B,{title:"Статистика"},{default:f(()=>[x(P)]),_:1})])]),_:1}))}});export{J as default};
