import{d as M,u as V,f as A,r as l,a as m,c as x,b as e,h as S,w as p,v,i as j,o as E,F as B,g as U,t as y,n as D,j as I,k as N,l as P,m as C,p as k}from"./index-D3YnNOX1.js";import{_ as L,a as O,b as F}from"./ComponentCard.vue_vue_type_script_setup_true_lang-BODghNfw.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},R={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},q={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full dark:bg-gray-800"},G={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 dark:bg-gray-800"},K={class:"space-y-4"},Q=M({__name:"AddAccountButton",setup(T){const n=V(),f=A(),b=l([]);l(!1);const d=l(!1);l(!1),l(null),l({id:null,username:"",password:"",is_active:!0,balance:0});const a=l({username:"",password:""}),i=()=>{a.value={username:"",password:"",is_active:!0,balance:0},d.value=!0},u=()=>{d.value=!1},_=async()=>{try{const c=localStorage.getItem("accessToken"),s=await fetch("/dashboard/api/v1/accounts",{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify(a.value)});if(!s.ok)if(s.status===401){if(await n.refresh())return await retryOriginalRequest();n.logout(),f.push("/")}else console.error("Ошибка запроса:",await s.json());const g=await s.json();b.value.push(g),u()}catch(c){console.error("Error creating account:",c)}};return(c,s)=>(m(),x("div",null,[e("div",{class:"flex justify-end"},[e("button",{onClick:i,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-500 dark:hover:bg-blue-600"},s[2]||(s[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),S(" Добавить новый аккаунт ")]))]),d.value?(m(),x("div",J,[e("div",R,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:u},s[3]||(s[3]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75 dark:bg-gray-900 dark:opacity-75"},null,-1)])),s[7]||(s[7]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",q,[e("div",G,[s[6]||(s[6]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4"},"Добавить новый акаунт",-1)),e("div",K,[e("div",null,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Username",-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=g=>a.value.username=g),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"},null,512),[[v,a.value.username]])]),e("div",null,[s[5]||(s[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Password",-1)),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=g=>a.value.password=g),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"},null,512),[[v,a.value.password]])])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse dark:bg-gray-800"},[e("button",{type:"button",onClick:_,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"}," Создать "),e("button",{type:"button",onClick:u,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600"}," Отменить ")])])])])):j("",!0)]))}}),W={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},X={class:"max-w-full overflow-x-auto custom-scrollbar"},Y={class:"min-w-full"},Z={class:"divide-y divide-gray-200 dark:divide-gray-700"},ee={class:"px-5 py-4 sm:px-6"},te={class:"block font-medium text-gray-800 text-theme-sm dark:text-white/90"},se={class:"px-5 py-4 sm:px-6"},re={class:"text-gray-500 text-theme-sm dark:text-gray-400"},ae={class:"px-5 py-4 sm:px-6"},oe={class:"text-gray-500 text-theme-sm dark:text-gray-400"},le={class:"px-5 py-4 sm:px-6"},ne={class:"px-5 py-4 sm:px-6"},de={class:"text-gray-500 text-theme-sm dark:text-gray-400"},ie={class:"px-5 py-4 sm:px-6"},ue={class:"flex items-center space-x-2"},ce=["onClick"],me=["onClick"],ge={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},xe={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},fe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full dark:bg-gray-800"},be={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 dark:bg-gray-800"},pe={class:"space-y-4"},ye={key:1,class:"fixed inset-0 z-50 overflow-y-auto"},ve={__name:"BasicTableOne",setup(T){const n=l([]),f=l(!1),b=l(!1),d=l(null),a=l({id:null,username:"",password:"",is_active:!0,balance:0}),i=V(),u=async()=>{try{const o=localStorage.getItem("accessToken"),t=await fetch("/dashboard/api/v1/accounts",{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(!t.ok)if(t.status===401){if(await i.refresh())return await u(!0);i.logout(),router.push("/")}else console.error("Ошибка запроса:",await t.json());n.value=await t.json()}catch(o){console.error("Error fetching accounts:",o)}},_=o=>{a.value={id:o.id,username:o.username,password:o.password,is_active:o.is_active,balance:o.balance},f.value=!0},c=()=>{f.value=!1},s=async()=>{try{const o=localStorage.getItem("accessToken"),t=await fetch(`/dashboard/api/v1/accounts/${a.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(a.value)});if(!t.ok)if(t.status===401){if(await i.refresh())return await s(!0);i.logout(),router.push("/")}else console.error("Ошибка запроса:",await t.json());const r=n.value.findIndex(w=>w.id===a.value.id);r!==-1&&(n.value[r]={...a.value}),c(),await u()}catch(o){console.error("Error updating account:",o)}},g=o=>{d.value=o,b.value=!0},h=()=>{b.value=!1,d.value=null},$=async()=>{try{const o=localStorage.getItem("accessToken"),t=await fetch(`/dashboard/api/v1/accounts/${d.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}});if(!t.ok)if(t.status===401){if(await i.refresh())return await $(!0);i.logout(),router.push("/")}else console.error("Ошибка запроса:",await t.json());n.value=n.value.filter(r=>r.id!==d.value),h(),await u()}catch(o){console.error("Error deleting account:",o)}};return E(()=>{u()}),(o,t)=>(m(),x(B,null,[e("div",W,[e("div",X,[e("table",Y,[t[6]||(t[6]=e("thead",null,[e("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[e("th",{class:"px-5 py-3 text-left w-3/11 sm:px-6"},[e("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"ID")]),e("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[e("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Username")]),e("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[e("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Password")]),e("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[e("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Status")]),e("th",{class:"px-5 py-3 text-left w-2/11 sm:px-6"},[e("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Balance")]),e("th",{class:"px-5 py-3 text-left w-1/11 sm:px-6"},[e("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Actions")])])],-1)),e("tbody",Z,[(m(!0),x(B,null,U(n.value,(r,w)=>(m(),x("tr",{key:w,class:"border-t border-gray-100 dark:border-gray-800"},[e("td",ee,[e("span",te,y(r.id),1)]),e("td",se,[e("p",re,y(r.username),1)]),e("td",ae,[e("p",oe,y(r.password),1)]),e("td",le,[e("span",{class:D(["rounded-full px-2 py-0.5 text-theme-xs font-medium",{"bg-success-50 text-success-700 dark:bg-success-500/15 dark:text-success-500":r.is_active,"bg-error-50 text-error-700 dark:bg-error-500/15 dark:text-error-500":!r.is_active}])},y(r.is_active?"Активный":"Инактивный"),3)]),e("td",ne,[e("p",de,y(r.balance),1)]),e("td",ie,[e("div",ue,[e("button",{onClick:z=>_(r),class:"p-1 text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400"},t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)]),8,ce),e("button",{onClick:z=>g(r.id),class:"p-1 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400"},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,me)])])]))),128))])])])]),f.value?(m(),x("div",ge,[e("div",xe,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:c},t[7]||(t[7]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75 dark:bg-gray-900 dark:opacity-75"},null,-1)])),t[14]||(t[14]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",fe,[e("div",be,[t[13]||(t[13]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4"},"Редактирование аккаунта",-1)),e("div",pe,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Username",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.value.username=r),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"},null,512),[[v,a.value.username]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Password",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>a.value.password=r),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"},null,512),[[v,a.value.password]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.value.is_active=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"},t[10]||(t[10]=[e("option",{value:!0},"Активный",-1),e("option",{value:!1},"Инактивный",-1)]),512),[[I,a.value.is_active]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Balance",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>a.value.balance=r),type:"number",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"},null,512),[[v,a.value.balance]])])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse dark:bg-gray-800"},[e("button",{type:"button",onClick:s,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"}," Сохранить "),e("button",{type:"button",onClick:c,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600"}," Отменить ")])])])])):j("",!0),b.value?(m(),x("div",ye,[e("div",{class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:h},t[15]||(t[15]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75 dark:bg-gray-900 dark:opacity-75"},null,-1)])),t[17]||(t[17]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",{class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full dark:bg-gray-800"},[t[16]||(t[16]=N('<div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 dark:bg-gray-800" data-v-5e5dc5c5><div class="sm:flex sm:items-start" data-v-5e5dc5c5><div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10" data-v-5e5dc5c5><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-5e5dc5c5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-5e5dc5c5></path></svg></div><div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left" data-v-5e5dc5c5><h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white" data-v-5e5dc5c5>Удалить аккаунт</h3><div class="mt-2" data-v-5e5dc5c5><p class="text-sm text-gray-500 dark:text-gray-400" data-v-5e5dc5c5>Вы уверены, что хотите удалить аакаунт? Это действие будет невозвртано.</p></div></div></div></div>',1)),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse dark:bg-gray-800"},[e("button",{type:"button",onClick:$,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Удалить "),e("button",{type:"button",onClick:h,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600"}," Отменить ")])])])])):j("",!0)],64))}},he=H(ve,[["__scopeId","data-v-5e5dc5c5"]]),we={class:"space-y-5 sm:space-y-6"},je=M({__name:"AccountTable",setup(T){const n=l("Аккаунты Pixverse");return(f,b)=>(m(),P(L,null,{default:C(()=>[k(O,{pageTitle:n.value},null,8,["pageTitle"]),e("div",we,[k(F,{title:"Аккаунты"},{action:C(()=>[k(Q)]),default:C(()=>[k(he)]),_:1})])]),_:1}))}});export{je as default};
