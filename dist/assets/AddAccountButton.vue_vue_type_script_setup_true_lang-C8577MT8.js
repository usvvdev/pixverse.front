import{d as x,u as y,r as s,a as i,c as u,b as t,g as w,w as m,v as c,h as v,f as h}from"./index-DJvXe5fk.js";const k={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},C={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},j={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full dark:bg-gray-800"},A={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 dark:bg-gray-800"},B={class:"space-y-4"},T=x({__name:"AddAccountButton",setup(V){const d=y(),b=h(),g=s([]);s(!1);const n=s(!1);s(!1),s(null),s({id:null,username:"",password:"",is_active:!0,balance:0});const r=s({username:"",password:""}),f=()=>{r.value={username:"",password:"",is_active:!0,balance:0},n.value=!0},l=()=>{n.value=!1},p=async()=>{try{const a=localStorage.getItem("accessToken"),e=await fetch("/dashboard/api/v1/accounts",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(r.value)});if(!e.ok)if(e.status===401){if(await d.refresh())return await retryOriginalRequest();d.logout(),b.push("/")}else console.error("Ошибка запроса:",await e.json());const o=await e.json();g.value.push(o),l()}catch(a){console.error("Error creating account:",a)}};return(a,e)=>(i(),u("div",null,[t("div",{class:"flex justify-end"},[t("button",{onClick:f,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-500 dark:hover:bg-blue-600"},e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),w(" Добавить новый аккаунт ")]))]),n.value?(i(),u("div",k,[t("div",C,[t("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:l},e[3]||(e[3]=[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75 dark:bg-gray-900 dark:opacity-75"},null,-1)])),e[7]||(e[7]=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),t("div",j,[t("div",A,[e[6]||(e[6]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4"},"Добавить новый акаунт",-1)),t("div",B,[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Username",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.value.username=o),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"},null,512),[[c,r.value.username]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Password",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.password=o),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"},null,512),[[c,r.value.password]])])])]),t("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse dark:bg-gray-800"},[t("button",{type:"button",onClick:p,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"}," Создать "),t("button",{type:"button",onClick:l,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600"}," Отменить ")])])])])):v("",!0)]))}});export{T as _};
