import{_ as F,a as U,b as B}from"./ComponentCard.vue_vue_type_script_setup_true_lang-yfgqG07h.js";import{d as k,r as i,o as I,a,c as r,b as t,w as h,n as f,F as p,i as x,t as l,p as S,q as $,h as v,g as u}from"./index-tpwZAxC-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"mb-4 flex flex-wrap gap-4 items-center"},T=["value"],V=["value"],C={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},D={class:"max-w-full overflow-x-auto custom-scrollbar"},N={class:"min-w-full"},j={class:"divide-y divide-gray-200 dark:divide-gray-700"},L={class:"px-5 py-4 sm:px-6 text-theme-sm"},M={class:"block font-medium text-gray-800 dark:text-white/90"},P={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},q={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},G={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},R={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},z={class:"list-disc list-inside text-xs space-y-1"},H={key:0,class:"italic text-gray-400"},J={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},K={class:"list-disc list-inside text-xs space-y-1"},O=k({__name:"BasicTableFive",setup(b){const m=i([]),d=i(""),n=i(""),y=i([]),_=i([]),g=async()=>{try{const o=new URLSearchParams;d.value&&o.append("user_id",d.value),n.value&&o.append("app_id",n.value);const s=await fetch(`/dashboard/api/v1/statistics?${o.toString()}`);if(!s.ok)throw new Error("Failed to fetch statistics");m.value=await s.json()}catch(o){console.error("Error fetching statistics:",o)}},w=async()=>{try{const o=await fetch("/dashboard/api/v1/statistics/filters");if(!o.ok)throw new Error("Failed to fetch filters");const s=await o.json();y.value=s.user_ids??[],_.value=s.app_ids??[]}catch(o){console.error("Error fetching filter options:",o)}};return I(async()=>{await w(),await g()}),(o,s)=>(a(),r("div",null,[t("div",E,[h(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),class:"px-3 py-2 border rounded-md text-sm w-48 dark:bg-gray-900 dark:text-white"},[s[2]||(s[2]=t("option",{value:""},"All Users",-1)),(a(!0),r(p,null,x(y.value,e=>(a(),r("option",{key:e,value:e},l(e),9,T))),128))],512),[[f,d.value]]),h(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>n.value=e),class:"px-3 py-2 border rounded-md text-sm w-48 dark:bg-gray-900 dark:text-white"},[s[3]||(s[3]=t("option",{value:""},"All Apps",-1)),(a(!0),r(p,null,x(_.value,e=>(a(),r("option",{key:e,value:e},l(e),9,V))),128))],512),[[f,n.value]]),t("button",{onClick:g,class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700"}," Apply Filters ")]),t("div",C,[t("div",D,[t("table",N,[s[4]||(s[4]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-5 py-3 text-left w-2/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"User ID")]),t("th",{class:"px-5 py-3 text-left w-2/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"App ID")]),t("th",{class:"px-5 py-3 text-left w-1/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Usage")]),t("th",{class:"px-5 py-3 text-left w-1/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Balance")]),t("th",{class:"px-5 py-3 text-left w-3/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Generations")]),t("th",{class:"px-5 py-3 text-left w-3/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Accounts")])])],-1)),t("tbody",j,[(a(!0),r(p,null,x(m.value,(e,A)=>(a(),r("tr",{key:A,class:"border-t border-gray-100 dark:border-gray-800"},[t("td",L,[t("span",M,l(e.user_id),1)]),t("td",P,l(e.app_id),1),t("td",q,l(e.app_id_usage),1),t("td",G,l(e.balance),1),t("td",R,[t("ul",z,[(a(!0),r(p,null,x(e.generation_ids.slice(0,3),c=>(a(),r("li",{key:c},l(c),1))),128)),e.generation_ids.length>3?(a(),r("li",H," +"+l(e.generation_ids.length-3)+" ещё ",1)):S("",!0)])]),t("td",J,[t("ul",K,[(a(!0),r(p,null,x(e.accounts,c=>(a(),r("li",{key:c.id},l(c.username),1))),128))])])]))),128))])])])])]))}}),Q={class:"space-y-5 sm:space-y-6"},Z=k({__name:"StatsTable",setup(b){const m=i("Статистика пользователей");return(d,n)=>(a(),$(B,null,{default:v(()=>[u(F,{pageTitle:m.value},null,8,["pageTitle"]),t("div",Q,[u(U,{title:"Статистика"},{default:v(()=>[u(O)]),_:1})])]),_:1}))}});export{Z as default};
