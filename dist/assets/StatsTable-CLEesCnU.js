import{_ as B,a as I,b as S}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CswAMQAf.js";import{d as k,r as l,o as $,a,c as r,b as t,w as h,n as f,F as c,i as p,t as o,p as F,q as T,h as v,g as u}from"./index-B0_3lMEf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"mb-4 flex flex-wrap gap-4 items-center"},E=["value"],V=["value"],C={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},D={class:"max-w-full overflow-x-auto custom-scrollbar"},N={class:"min-w-full"},j={class:"divide-y divide-gray-200 dark:divide-gray-700"},z={class:"px-5 py-4 sm:px-6 text-theme-sm"},L={class:"block font-medium text-gray-800 dark:text-white/90"},M={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},P={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},q={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},G={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},R={class:"list-disc list-inside text-xs space-y-1"},H={key:0,class:"italic text-gray-400"},J={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},K={class:"list-disc list-inside text-xs space-y-1"},O=k({__name:"BasicTableFive",setup(b){const x=l([]),i=l(""),n=l(""),y=l([]),_=l([]),g=async()=>{const m=localStorage.getItem("accessToken");try{const s=new URLSearchParams;i.value&&s.append("user_id",i.value),n.value&&s.append("app_id",n.value);const e=await fetch(`/dashboard/api/v1/statistics?app_name=pixverse&${s.toString()}`,{headers:{Authorization:`Bearer ${m}`}});if(!e.ok)throw new Error("Failed to fetch statistics");x.value=await e.json()}catch(s){console.error("Error fetching statistics:",s)}},w=async()=>{const m=localStorage.getItem("accessToken");try{const s=await fetch("/dashboard/api/v1/statistics/filters?app_name=pixverse",{headers:{Authorization:`Bearer ${m}`}});if(!s.ok)throw new Error("Failed to fetch filters");const e=await s.json();y.value=e.user_ids??[],_.value=e.app_ids??[]}catch(s){console.error("Error fetching filter options:",s)}};return $(async()=>{await w(),await g()}),(m,s)=>(a(),r("div",null,[t("div",U,[h(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>i.value=e),class:"px-3 py-2 border rounded-md text-sm w-48 dark:bg-gray-900 dark:text-white"},[s[2]||(s[2]=t("option",{value:""},"All Users",-1)),(a(!0),r(c,null,p(y.value,e=>(a(),r("option",{key:e,value:e},o(e),9,E))),128))],512),[[f,i.value]]),h(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>n.value=e),class:"px-3 py-2 border rounded-md text-sm w-48 dark:bg-gray-900 dark:text-white"},[s[3]||(s[3]=t("option",{value:""},"All Apps",-1)),(a(!0),r(c,null,p(_.value,e=>(a(),r("option",{key:e,value:e},o(e),9,V))),128))],512),[[f,n.value]]),t("button",{onClick:g,class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700"}," Apply Filters ")]),t("div",C,[t("div",D,[t("table",N,[s[4]||(s[4]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-5 py-3 text-left w-2/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"User ID")]),t("th",{class:"px-5 py-3 text-left w-2/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"App ID")]),t("th",{class:"px-5 py-3 text-left w-1/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Usage")]),t("th",{class:"px-5 py-3 text-left w-1/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Balance")]),t("th",{class:"px-5 py-3 text-left w-3/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Generations")]),t("th",{class:"px-5 py-3 text-left w-3/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Accounts")])])],-1)),t("tbody",j,[(a(!0),r(c,null,p(x.value,(e,A)=>(a(),r("tr",{key:A,class:"border-t border-gray-100 dark:border-gray-800"},[t("td",z,[t("span",L,o(e.user_id),1)]),t("td",M,o(e.app_id),1),t("td",P,o(e.app_id_usage),1),t("td",q,o(e.balance),1),t("td",G,[t("ul",R,[(a(!0),r(c,null,p(e.generation_ids.slice(0,3),d=>(a(),r("li",{key:d},o(d),1))),128)),e.generation_ids.length>3?(a(),r("li",H," +"+o(e.generation_ids.length-3)+" ещё ",1)):F("",!0)])]),t("td",J,[t("ul",K,[(a(!0),r(c,null,p(e.accounts,d=>(a(),r("li",{key:d.id},o(d.username),1))),128))])])]))),128))])])])])]))}}),Q={class:"space-y-5 sm:space-y-6"},Z=k({__name:"StatsTable",setup(b){const x=l("Статистика пользователей");return(i,n)=>(a(),T(S,null,{default:v(()=>[u(B,{pageTitle:x.value},null,8,["pageTitle"]),t("div",Q,[u(I,{title:"Статистика"},{default:v(()=>[u(O)]),_:1})])]),_:1}))}});export{Z as default};
