import{_ as F,a as U,b as A}from"./ComponentCard.vue_vue_type_script_setup_true_lang-5bc8IPVM.js";import{d as v,r as d,o as B,a as r,c as o,b as t,w as h,n as g,F as p,i as u,t as l,q as I,h as f,g as x}from"./index-c4N2JW1k.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"mb-4 flex flex-wrap gap-4 items-center"},$=["value"],E=["value"],T={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},D={class:"max-w-full overflow-x-auto custom-scrollbar"},V={class:"min-w-full"},C={class:"divide-y divide-gray-200 dark:divide-gray-700"},j={class:"px-5 py-4 sm:px-6 text-theme-sm"},L={class:"block font-medium text-gray-800 dark:text-white/90"},M={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},N={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},P={class:"px-5 py-4 sm:px-6 text-theme-sm text-gray-600 dark:text-gray-400"},q=v({__name:"BasicTableFive",setup(b){const c=d([]),i=d(""),n=d(""),m=d([]),y=d([]),_=async()=>{try{const a=new URLSearchParams;i.value&&a.append("user_id",i.value),n.value&&a.append("app_id",n.value);const e=await fetch(`/dashboard/api/v1/statistics?app_name=chatgpt&${a.toString()}`);if(!e.ok)throw new Error("Failed to fetch statistics");c.value=await e.json()}catch(a){console.error("Error fetching statistics:",a)}},w=async()=>{try{const a=await fetch("/dashboard/api/v1/statistics/filters");if(!a.ok)throw new Error("Failed to fetch filters");const e=await a.json();m.value=e.user_ids??[],y.value=e.app_ids??[]}catch(a){console.error("Error fetching filter options:",a)}};return B(async()=>{await w(),await _()}),(a,e)=>(r(),o("div",null,[t("div",S,[h(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),class:"px-3 py-2 border rounded-md text-sm w-48 dark:bg-gray-900 dark:text-white"},[e[2]||(e[2]=t("option",{value:""},"All Users",-1)),(r(!0),o(p,null,u(m.value,s=>(r(),o("option",{key:s,value:s},l(s),9,$))),128))],512),[[g,i.value]]),h(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s),class:"px-3 py-2 border rounded-md text-sm w-48 dark:bg-gray-900 dark:text-white"},[e[3]||(e[3]=t("option",{value:""},"All Apps",-1)),(r(!0),o(p,null,u(y.value,s=>(r(),o("option",{key:s,value:s},l(s),9,E))),128))],512),[[g,n.value]]),t("button",{onClick:_,class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700"}," Apply Filters ")]),t("div",T,[t("div",D,[t("table",V,[e[4]||(e[4]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-5 py-3 text-left w-2/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"User ID")]),t("th",{class:"px-5 py-3 text-left w-2/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"App ID")]),t("th",{class:"px-5 py-3 text-left w-1/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Usage")]),t("th",{class:"px-5 py-3 text-left w-1/12 sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Balance")])])],-1)),t("tbody",C,[(r(!0),o(p,null,u(c.value,(s,k)=>(r(),o("tr",{key:k,class:"border-t border-gray-100 dark:border-gray-800"},[t("td",j,[t("span",L,l(s.user_id),1)]),t("td",M,l(s.app_id),1),t("td",N,l(s.app_id_usage),1),t("td",P,l(s.balance),1)]))),128))])])])])]))}}),R={class:"space-y-5 sm:space-y-6"},J=v({__name:"StatsTable",setup(b){const c=d("Статистика пользователей");return(i,n)=>(r(),I(A,null,{default:f(()=>[x(F,{pageTitle:c.value},null,8,["pageTitle"]),t("div",R,[x(U,{title:"Статистика"},{default:f(()=>[x(q)]),_:1})])]),_:1}))}});export{J as default};
